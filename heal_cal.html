<!DOCTYPE html>
<html lang="ko">
<head>


    <title>초당 회복력 계산</title>

     

    <div class="menu-panel" id="menuPanel">
        <a href="index.html">  전투력 랭킹</a>
        <a href="https://cafe.naver.com/octopusnewb?iframe_url_utf8=%2FArticleRead.nhn%253Fclubid%3D31622004%2526articleid%3D11%2526referrerAllArticles%3Dtrue">  공략 모음집</a>
        <a href="heal_cal.html">  초당 회복력 계산</a>
        <a href="members.html"> 문어단원 목록</a>
        <a href="stats.html">  통계 분석</a>
    </div>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <style>
        html, body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            font-family: "Pretendard", Arial, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #5fa049, #88c065);
        }

        /* ===== 상단 바 ===== */
        .top-bar {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 25px 0;
        }

            .top-bar h1 {
                color: white;
                font-size: 32px;
                font-weight: 900;
                margin: 0;
            }

        .menu-btn {
            position: absolute;
            left: 20px;
            width: 34px;
            height: 26px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            cursor: pointer;
        }

            .menu-btn span {
                height: 4px;
                background: white;
                border-radius: 3px;
            }

        /* ===== 메뉴 ===== */
        .menu-panel {
            position: absolute;
            top: 80px;
            left: 20px;
            background: white;
            border-radius: 14px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.25);
            padding: 10px 0;
            width: 220px;
            display: none;
            z-index: 999;
        }

            .menu-panel a {
                display: block;
                padding: 14px 20px;
                text-decoration: none;
                color: #254816;
                font-weight: 700;
            }

                .menu-panel a:hover {
                    background: #eef6ea;
                }

        /* ===== 계산기 카드 ===== */
        #calculator {
            max-width: 460px;
            margin: 40px auto 80px;
            padding: 25px;
            background: white;
            border-radius: 18px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.25);
        }

            #calculator h2 {
                text-align: center;
                color: #254816;
                margin-bottom: 20px;
            }

        /* ===== 입력 ===== */
        select, input {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            font-size: 16px;
            border-radius: 10px;
            border: 2px solid #88c065;
            box-sizing: border-box;
        }

            input.hidden {
                display: none;
            }

        /* ===== 결과 ===== */
        .result-box {
            margin: 15px 0;
            font-size: 20px;
            font-weight: 800;
            text-align: center;
        }

        /* ===== 버튼 ===== */
        button {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            font-weight: 800;
            background: #5fa049;
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
        }

            button:hover {
                background: #4b8c38;
            }

        /* ===== 저장 결과 ===== */
        #savedResults {
            margin-top: 25px;
        }

            #savedResults h3 {
                margin-bottom: 10px;
            }

        #resultList {
            padding-left: 20px;
        }

            #resultList li.max {
                color: red;
                font-weight: 900;
            }

        /* 모바일 */
        @media (max-width: 600px) {
            #calculator {
                margin: 30px 12px 80px;
            }

            .top-bar h1 {
                font-size: 22px;
            }
        }

        #calculator {
            width: 100%;
            max-width: 460px;
            margin: 80px auto;
        }

        @media (max-width: 720px) {
            #calculator {
                margin: 40px 12px;
                padding: 20px;
            }
        }

        select,
        .calc-input,
        button {
            width: 100%;
            box-sizing: border-box;
        }

        .menu-btn {
            padding: 8px;
        }
    </style>
</head>

<body>

    <div class="top-bar">
        <div class="menu-btn" id="menuBtn">
            <span></span><span></span><span></span>
        </div>
        <h1>공식 문어단 웹사이트</h1>
    </div>

    <div class="menu-panel" id="menuPanel">
        <a href="ranking.html">전투력 랭킹</a>
        <a href="attendance.html">공략 모음집</a>
        <a href="notice.html">초당 회복력 계산</a>
        <a href="members.html">문어단원 목록</a>
        <a href="stats.html">통계 분석</a>
    </div>

    <div id="calculator">
        <h2>초당 회복력 계산기</h2>

        <select id="calcType">
            <option value="type1">① 체젠 회복량</option>
            <option value="type2">② 생흡 회복량</option>
            <option value="type3">③ 종합 회복량</option>
        </select>

        <input type="number" class="calc-input" placeholder="체력 재생">
        <input type="number" class="calc-input" placeholder="총 체력">
        <input type="number" class="calc-input" placeholder="세번째 수">
        <input type="number" class="calc-input" placeholder="네번째 수">
        <input type="number" class="calc-input" placeholder="다섯번째 수">

        <div class="result-box">
            결과값: <span id="sum">0</span>
        </div>

        <button id="saveBtn">결과 저장</button>

        <div id="savedResults">
            <h3>저장된 결과 (최대 3개)</h3>
            <ul id="resultList"></ul>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const menuBtn = document.getElementById('menuBtn');
            const menuPanel = document.getElementById('menuPanel');
            const calcType = document.getElementById('calcType');
            const inputs = document.querySelectorAll('.calc-input');
            const sumSpan = document.getElementById('sum');
            const resultList = document.getElementById('resultList');
            const saveBtn = document.getElementById('saveBtn');

            let saved = [];

            menuBtn.onclick = () => {
                menuPanel.style.display =
                    menuPanel.style.display === 'block' ? 'none' : 'block';
            };

            document.addEventListener('click', e => {
                if (!menuBtn.contains(e.target) && !menuPanel.contains(e.target)) {
                    menuPanel.style.display = 'none';
                }
            });

            function updateInputs() {
                const type = calcType.value;
                inputs.forEach((input, idx) => {
                    input.value = '';
                    input.classList.add('hidden');

                    if (type === 'type1' && idx < 2) input.classList.remove('hidden');
                    if (type === 'type2' && idx < 3) input.classList.remove('hidden');
                    if (type === 'type3') input.classList.remove('hidden');
                });
                calculate();
            }

            function calculate() {
                const v = Array.from(inputs).map(i => Number(i.value) || 0);
                let r = 0;

                if (calcType.value === 'type1') {
                    r = v[0] * v[1] / 100;
                } else if (calcType.value === 'type2') {
                    r = 1.7 * v[0] * v[1] * (100 + v[2]) / 5500;
                } else {
                    r = (v[0] * v[1]) / 100 +
                        (1.7 * v[2] * v[3] * (100 + v[4])) / 5500;
                }

                sumSpan.textContent = r.toFixed(2);
                return r;
            }

            inputs.forEach(i => i.addEventListener('input', calculate));
            calcType.addEventListener('change', updateInputs);

            saveBtn.onclick = () => {
                if (saved.length >= 3) {
                    alert('최대 3개까지만 저장할 수 있어!');
                    return;
                }
                saved.push(calculate());
                resultList.innerHTML = '';

                const max = Math.max(...saved);
                saved.forEach((v, i) => {
                    const li = document.createElement('li');
                    li.textContent = `결과 ${i + 1}: ${v.toFixed(2)}`;
                    if (v === max && saved.length > 1) li.classList.add('max');
                    resultList.appendChild(li);
                });
            };

            updateInputs();
        });

        document.addEventListener('DOMContentLoaded', () => {
            const calcType = document.getElementById('calcType');
            const inputs = document.querySelectorAll('.calc-input');
            const sumSpan = document.getElementById('sum');
            const resultList = document.getElementById('resultList');
            const saveBtn = document.getElementById('saveBtn');

            let saved = [];

            const inputNames = {
                type1: [
                    '체력 재생',
                    '총 체력'
                ],
                type2: [
                    '생명력 흡수',
                    '실질 피해',
                    '공격 속도'
                ],
                type3: [
                    '체력 재생',
                    '총 체력',
                    '생명력 흡수',
                    '실질 피해',
                    '공격 속도'
                ]
            };

            function updateInputs() {
                const type = calcType.value;
                const names = inputNames[type];

                inputs.forEach((input, idx) => {
                    input.value = '';
                    input.classList.add('hidden');

                    if (names[idx]) {
                        input.placeholder = names[idx];
                        input.classList.remove('hidden');
                    }
                });

                calculate();
            }

            function calculate() {
                const v = Array.from(inputs).map(i => Number(i.value) || 0);
                let r = 0;

                if (calcType.value === 'type1') {
                    r = v[0] * v[1] / 100;
                } else if (calcType.value === 'type2') {
                    r = 1.7 * v[0] * v[1] * (100 + v[2]) / 5500;
                } else {
                    r = (v[0] * v[1]) / 100 +
                        (1.7 * v[2] * v[3] * (100 + v[4])) / 5500;
                }

                sumSpan.textContent = r.toFixed(2);
                return r;
            }

            inputs.forEach(i => i.addEventListener('input', calculate));
            calcType.addEventListener('change', updateInputs);

            saveBtn.onclick = () => {
                if (saved.length >= 3) {
                    alert('최대 3개까지만 저장할 수 있어!');
                    return;
                }

                saved.push(calculate());
                resultList.innerHTML = '';

                const max = Math.max(...saved);
                saved.forEach((v, i) => {
                    const li = document.createElement('li');
                    li.textContent = `결과 ${i + 1}: ${v.toFixed(2)}`;
                    if (v === max && saved.length > 1) {
                        li.style.color = 'red';
                        li.style.fontWeight = '900';
                    }
                    resultList.appendChild(li);
                });
            };

            updateInputs(); // 최초 1회 실행
        });
    </script>

</body>
</html>
